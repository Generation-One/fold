---
id: 44a45d07-233e-a2e9-0dec-6a52a1430392
title: memories.rs
author: system
file_path: src/db/memories.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:05:21.238466500Z
updated_at: 2026-02-03T08:05:21.238466500Z
---

//! Memory database queries.
//!
//! Memories are the core knowledge units in Fold - they can represent
//! code files, sessions, specs, decisions, tasks, commits, PRs, and general notes.

use crate::{Error, Result};
use serde::{Deserialize, Serialize};
use sqlx::FromRow;

use super::DbPool;

// ============================================================================
// Types
// ============================================================================

/// Memory type enumeration.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "lowercase")]
pub enum MemoryType {
    Codebase,
    Session,
    Spec,
    Decision,
    Task,
    General,
    Commit,
    Pr,
}

impl MemoryType {
    pub fn as_str(&self) -> &'static str {
        match self {
            Self::Codebase => "codebase",
            Self::Session => "session",
            Self::Spec => "spec",
            Self::Decision => "decision",
        