---
id: f958932d-d2a2-0fd7-7a92-b684a5dd03c7
title: qdrant.rs
author: system
file_path: src/services/qdrant.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:07:05.246042900Z
updated_at: 2026-02-03T08:07:05.246042900Z
---

//! Qdrant service for vector storage.
//!
//! Provides collection management, upsert, search, and delete operations
//! for storing and retrieving memory embeddings.

use std::collections::HashMap;
use std::sync::Arc;

use qdrant_client::qdrant::{
    condition::ConditionOneOf, CreateCollectionBuilder, DeletePointsBuilder, Distance,
    FieldCondition, Filter, Condition, Match, PointId, PointStruct, ScoredPoint,
    ScrollPointsBuilder, SearchPointsBuilder, UpsertPointsBuilder, Value as QdrantValue,
    VectorParamsBuilder, r#match::MatchValue,
};
use qdrant_client::Qdrant;
use serde_json::Value;
use tracing::{debug, info};

use crate::config::QdrantConfig;
use crate::error::{Error, Result};

/// Point payload key names
const KEY_TYPE: &str = "type";
const KEY_AUTHOR: &str = "author";
const KEY_FILE_PATH: &str = "file_path";
const KEY_PROJECT_ID: &str = "project_id";

/// Service for vector storage using Qdrant.
///
/// Manages collections per project with