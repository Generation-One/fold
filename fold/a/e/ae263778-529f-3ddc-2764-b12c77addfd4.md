---
id: ae263778-529f-3ddc-2764-b12c77addfd4
title: state.rs
author: system
file_path: src/state.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:07:07.185044100Z
updated_at: 2026-02-03T08:07:07.185044100Z
---

//! Application state for Fold.
//!
//! Contains the shared state that is passed to all handlers.

use std::sync::Arc;

use crate::db::DbPool;
use crate::services::{
    AuthService, ContentResolverService, EmbeddingService, FoldStorageService, GitHubService,
    GitLabService, GitLocalService, GitService, GitSyncService, GraphService, IndexerService,
    LinkerService, LlmService, MemoryService, MetaStorageService, ProjectService, ProviderRegistry,
    QdrantService,
};
use std::path::PathBuf;
use crate::{config, Result};

/// Application state shared across all handlers.
#[derive(Clone)]
pub struct AppState {
    /// Database connection pool.
    pub db: DbPool,
    /// Qdrant vector database service.
    pub qdrant: Arc<QdrantService>,
    /// Embedding generation service.
    pub embeddings: Arc<EmbeddingService>,
    /// LLM completion service.
    pub llm: Arc<LlmService>,
    /// GitHub API service.
    pub github: Arc<GitHubService>,
    /// GitLab 