---
id: a5c9adea-f091-4f1a-c656-7ad450e78efa
title: memory.rs
author: system
file_path: src/services/memory.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:55.473225100Z
updated_at: 2026-02-03T08:06:55.473225100Z
---

//! Agentic Memory Service.
//!
//! Implements an agentic memory system based on A-MEM principles:
//! - LLM-powered content analysis for automatic metadata extraction
//! - Memory evolution with LLM-driven linking decisions
//! - Neighbour metadata updates during evolution
//! - Link traversal for holographic context retrieval
//!
//! Content is stored externally via FoldStorageService:
//! - All memories: content stored in fold/{char1}/{char2}/{hash}.md

use std::collections::{HashMap, HashSet};
use std::path::Path;
use std::sync::Arc;

use chrono::Utc;
use serde::{Deserialize, Serialize};
use serde_json::{json, Value};
use tracing::{debug, info, warn};

use crate::db::DbPool;
use crate::error::{Error, Result};
use crate::models::{Memory, MemoryCreate, MemorySearchResult, MemoryType, MemoryUpdate};

use super::decay::{calculate_strength, blend_scores, DecayConfig, DEFAULT_HALF_LIFE_DAYS, DEFAULT_STRENGTH_WEIGHT};
use super::fold_storage::FoldStorageService;
