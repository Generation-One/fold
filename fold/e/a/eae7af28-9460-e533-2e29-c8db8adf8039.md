---
id: eae7af28-9460-e533-2e29-c8db8adf8039
title: graph.rs
author: system
file_path: src/services/graph.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:42.377252500Z
updated_at: 2026-02-03T08:06:42.377252500Z
---

//! Graph service for relationship queries.
//!
//! Provides traversal and analysis of the memory knowledge graph,
//! including context gathering and impact analysis.

use std::collections::{HashMap, HashSet, VecDeque};

use serde::{Deserialize, Serialize};

use crate::db::DbPool;
use crate::error::Result;
use crate::models::{LinkType, Memory, MemoryLink};

/// Service for querying the memory knowledge graph.
#[derive(Clone)]
pub struct GraphService {
    db: DbPool,
}

/// A node in the graph result
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GraphNode {
    pub id: String,
    pub memory_type: String,
    pub title: Option<String>,
    pub content_preview: String,
    pub file_path: Option<String>,
    pub depth: usize,
}

/// An edge in the graph result
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GraphEdge {
    pub source_id: String,
    pub target_id: String,
    pub link_type: String,
    pub confidence: Option<f6