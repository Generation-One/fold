---
id: b7e9bfa1-e33f-71ff-5e35-51aac166853c
title: content_resolver.rs
author: system
file_path: src/services/content_resolver.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:13.914872100Z
updated_at: 2026-02-03T08:06:13.914872100Z
---

//! Content resolver service for memory content retrieval.
//!
//! Resolves memory content based on storage type:
//! - Codebase memories: read from source file via file_path
//! - Other memories: read from filesystem (fold/{project}/memories/{id}.md)

use crate::db::{self, DbPool};
use crate::models::{ContentStorage, Memory};
use crate::services::MetaStorageService;
use crate::Result;
use std::path::Path;
use std::sync::Arc;
use tokio::fs;
use tracing::warn;

/// Service for resolving memory content from external storage.
pub struct ContentResolverService {
    db: DbPool,
    meta_storage: Arc<MetaStorageService>,
}

impl ContentResolverService {
    /// Create a new content resolver service.
    pub fn new(db: DbPool, meta_storage: Arc<MetaStorageService>) -> Self {
        Self { db, meta_storage }
    }

    /// Resolve content for a memory based on its type and storage.
    ///
    /// Returns the content string, or None if content is unavailable
   