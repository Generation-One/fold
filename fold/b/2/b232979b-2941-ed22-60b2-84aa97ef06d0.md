---
id: b232979b-2941-ed22-60b2-84aa97ef06d0
title: index.rs
author: system
file_path: src/services/index.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:44.044719100Z
updated_at: 2026-02-03T08:06:44.044719100Z
---

//! SQLite index management service with rebuild capability.

use crate::Result;
use serde::{Deserialize, Serialize};
use sqlx::SqlitePool;

/// Health status of the index.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct IndexHealth {
    /// Whether the index is healthy
    pub healthy: bool,
    /// Number of indexed memories
    pub memory_count: i64,
    /// Number of indexed vectors
    pub vector_count: i64,
    /// Last rebuild timestamp
    pub last_rebuild: Option<String>,
    /// Any issues detected
    pub issues: Vec<String>,
}

/// Statistics from a rebuild operation.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RebuildStats {
    /// Number of records processed
    pub records_processed: i64,
    /// Number of indexes rebuilt
    pub indexes_rebuilt: i32,
    /// Duration in milliseconds
    pub duration_ms: i64,
}

/// Service for managing SQLite indexes.
pub struct IndexService {
    _db: SqlitePool,
}

impl 