---
id: 161d2374-fee5-ed82-a8d1-5fe7c1532351
title: linker.rs
author: system
file_path: src/services/linker.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:49.810873100Z
updated_at: 2026-02-03T08:06:49.810873100Z
---

//! Linker service for auto-creating links between memories.
//!
//! Analyzes memories and automatically creates relationships based on:
//! - File path relationships (same directory, imports)
//! - Semantic similarity
//! - LLM-suggested links
//! - Commit/file associations

use std::collections::HashSet;
use std::sync::Arc;

use chrono::Utc;
use serde::{Deserialize, Serialize};
use tracing::{debug, info};

use crate::db::DbPool;
use crate::error::{Error, Result};
use crate::models::{LinkType, Memory, MemoryLink, MemoryType};

use super::{EmbeddingService, LlmService, MemoryService, QdrantService};

/// Service for automatically creating links between memories.
#[derive(Clone)]
pub struct LinkerService {
    db: DbPool,
    memory: MemoryService,
    llm: Arc<LlmService>,
    qdrant: Arc<QdrantService>,
    embeddings: Arc<EmbeddingService>,
}

/// Link suggestion
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LinkSuggestion {
    pub sour