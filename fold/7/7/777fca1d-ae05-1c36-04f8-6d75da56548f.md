---
id: 777fca1d-ae05-1c36-04f8-6d75da56548f
title: status.rs
author: system
file_path: src/api/status.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:05:10.110233700Z
updated_at: 2026-02-03T08:05:10.110233700Z
---

//! Status Routes
//!
//! Health checks, status endpoints, and metrics.
//!
//! Routes:
//! - GET /health - Basic health check
//! - GET /health/ready - Readiness check (all dependencies up)
//! - GET /health/live - Liveness check (server responding)
//! - GET /status - Detailed system status
//! - GET /status/jobs - List background jobs
//! - GET /status/jobs/:id - Get job details
//! - GET /status/jobs/:id/logs - Get job logs
//! - GET /metrics - Prometheus metrics endpoint

use std::sync::atomic::{AtomicU64, Ordering};
use std::sync::OnceLock;
use std::time::Instant;

use axum::{
    extract::{Path, Query, State},
    http::StatusCode,
    response::IntoResponse,
    routing::get,
    Json, Router,
};
use chrono::{DateTime, NaiveDateTime, Utc};
use serde::{Deserialize, Serialize};
use uuid::Uuid;

use crate::{AppState, Result};

/// Parse a datetime string to DateTime<Utc>.
/// Handles both RFC3339 format and SQLite datetime format.
fn parse_datetime