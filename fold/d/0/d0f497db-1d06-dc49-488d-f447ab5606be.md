---
id: d0f497db-1d06-dc49-488d-f447ab5606be
title: meta_storage.rs
author: system
file_path: src/services/meta_storage.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:59.284824800Z
updated_at: 2026-02-03T08:06:59.284824800Z
---

//! Filesystem-centric memory storage service.
//!
//! Provides a storage layer that persists memories as markdown files
//! on the filesystem, enabling version control and direct editing.
//!
//! Memory files use YAML frontmatter for metadata:
//! ```markdown
//! ---
//! id: mem_abc123
//! type: session
//! title: "Session title"
//! author: claude
//! tags: ["tag1", "tag2"]
//! created_at: 2024-01-15T10:30:00Z
//! ---
//!
//! Content goes here...
//! ```

use crate::models::{Memory, MemoryType};
use crate::{Error, Result};
use chrono::{DateTime, Utc};
use serde::{Deserialize, Serialize};
use std::path::PathBuf;
use tokio::fs;

/// Parsed memory file with frontmatter metadata.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct MemoryFileContent {
    pub id: String,
    pub memory_type: String,
    pub title: Option<String>,
    pub author: Option<String>,
    pub tags: Vec<String>,
    pub keywords: Vec<String>,
    pub context: Option<Strin