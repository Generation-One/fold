---
id: 36c28776-a8c2-f81f-211c-d19d78931708
title: git.rs
author: system
file_path: src/services/git.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:06:33.382452200Z
updated_at: 2026-02-03T08:06:33.382452200Z
---

//! Git integration service for Fold.
//!
//! Provides auto-commit functionality for the fold/ directory
//! and sync operations to import memories from remote repositories.

use std::path::Path;
use std::sync::Arc;

use tracing::{debug, info, warn};

use crate::db::{DbPool, Project};
use crate::error::{Error, Result};
use crate::models::{MemoryCreate, MemoryType};
use crate::services::{EmbeddingService, FoldStorageService, MemoryService, QdrantService};

/// Statistics from a sync operation.
#[derive(Debug, Clone, Default, serde::Serialize, serde::Deserialize)]
pub struct SyncStats {
    /// Number of memories imported from remote.
    pub imported: usize,
    /// Number of memories that already existed locally.
    pub existing: usize,
    /// Number of errors during sync.
    pub errors: usize,
}

/// Result of an auto-commit operation.
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct CommitResult {
    /// The commit SHA if a com