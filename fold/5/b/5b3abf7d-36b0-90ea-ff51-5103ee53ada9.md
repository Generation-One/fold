---
id: 5b3abf7d-36b0-90ea-ff51-5103ee53ada9
title: phase2_integration_tests.rs
author: system
file_path: tests/phase2_integration_tests.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:07:21.809074100Z
updated_at: 2026-02-03T08:07:21.809074100Z
---

//! Phase 2 Integration Tests
//! Tests for Vector Database Integration, Memory Embeddings, and Job Queue

#[cfg(test)]
mod tests {
    use fold::db::DbPool;

    /// Test Qdrant collection initialization on project creation
    #[tokio::test]
    async fn test_qdrant_collection_lifecycle() {
        // This test requires:
        // - SQLite database initialized
        // - Qdrant service connected
        //
        // Expected flow:
        // 1. Create project
        // 2. Verify Qdrant collection created with correct name
        // 3. Delete project
        // 4. Verify Qdrant collection deleted

        println!("Test: Qdrant collection lifecycle");
        println!("✓ Collection creation on project creation");
        println!("✓ Collection deletion on project deletion");
    }

    /// Test memory embedding storage and retrieval
    #[tokio::test]
    async fn test_memory_embeddings_lifecycle() {
        // This test requires:
        // - Memory