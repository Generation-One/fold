---
id: 598b7066-ffcd-852b-df07-2601ff5702f2
title: providers.rs
author: system
file_path: src/db/providers.rs
language: rust
memory_type: codebase
created_at: 2026-02-03T08:05:28.288453500Z
updated_at: 2026-02-03T08:05:28.288453500Z
---

//! LLM and Embedding provider database queries.
//!
//! Handles provider configuration storage, retrieval, and OAuth state management.

use crate::{Error, Result};
use chrono::{DateTime, Utc};
use serde::{Deserialize, Serialize};
use serde_json::Value as JsonValue;
use sqlx::FromRow;

use super::DbPool;

// ============================================================================
// LLM Provider Types
// ============================================================================

/// LLM provider record from the database.
#[derive(Debug, Clone, FromRow, Serialize, Deserialize)]
pub struct LlmProviderRow {
    pub id: String,
    pub name: String,
    pub enabled: i32,
    pub priority: i32,
    pub auth_type: String,
    pub api_key: Option<String>,
    pub oauth_client_id: Option<String>,
    pub oauth_client_secret: Option<String>,
    pub oauth_access_token: Option<String>,
    pub oauth_refresh_token: Option<String>,
    pub oauth_token_expires_at: